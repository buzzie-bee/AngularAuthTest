<div class="signup-wrapper">
  <mat-card class="form-card">
    <mat-card-header class="form-header">
      <mat-card-title class="form-title">Sign Up</mat-card-title>
    </mat-card-header>

    <form [formGroup]="signUpForm" (ngSubmit)="onSubmit()">
      <mat-card-content class="form-container">
        <!-- name -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="Name"
            id="name"
            formControlName="name"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.name.errors && signUpForm.controls.name.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid name is required!</mat-content>
        </mat-card>
        <!-- email -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="Email"
            id="email"
            formControlName="email"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.email.errors &&
            signUpForm.controls.email.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid email is required!</mat-content>
        </mat-card>
        <!-- streetName -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="Street Name"
            id="streetName"
            formControlName="streetName"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.streetName.errors &&
            signUpForm.controls.streetName.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid Street Name is required!</mat-content>
        </mat-card>
        <!-- houseNumber -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="House Number"
            id="houseNumber"
            formControlName="houseNumber"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.houseNumber.errors &&
            signUpForm.controls.houseNumber.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid House Number is required!</mat-content>
        </mat-card>
        <!-- postcode -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="Postcode"
            id="postcode"
            formControlName="postcode"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.postcode.errors &&
            signUpForm.controls.postcode.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid Postcode is required!</mat-content>
        </mat-card>
        <!-- city -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="City"
            id="city"
            formControlName="city"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.city.errors && signUpForm.controls.city.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid City is required!</mat-content>
        </mat-card>
        <!-- phone -->
        <mat-form-field class="form-text-input">
          <input
            matInput
            placeholder="Phone Number"
            id="phone"
            formControlName="phone"
            required
          />
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.phone.errors &&
            signUpForm.controls.phone.touched
          "
          class="form-error-card"
        >
          <mat-content>A valid Phone Number is required!</mat-content>
        </mat-card>
        <!-- password -->

        <mat-form-field class="form-text-input">
          <input
            matInput
            [type]="hide ? 'password' : 'text'"
            placeholder="Password"
            formControlName="password"
            required
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="hide = !hide"
            [attr.aria-label]="'Hide password'"
            [attr.aria-pressed]="hide"
          >
            <mat-icon>{{ hide ? "visibility_off" : "visibility" }}</mat-icon>
          </button>
        </mat-form-field>
        <mat-card
          *ngIf="
            signUpForm.controls.password.errors &&
            signUpForm.controls.password.touched
          "
          class="form-error-card"
        >
          <mat-content>A password is required!</mat-content>
        </mat-card>
      </mat-card-content>
      <button
        mat-stroked-button
        type="submit"
        color="accent"
        class="form-submit-button"
        loading="attempting"
        [class.button-loading-spinner]="loading"
      >
        <span
          class="form-submit-button-text"
          [class.form-submit-button-loading]="loading"
        >
          Sign Up
        </span>
      </button>
      <mat-card *ngIf="failed && !exists" class="form-error-card">
        <mat-content
          ><p class="title">We could not create a user with these details</p>
          <p>Please check for any error messages.</p>
        </mat-content>
      </mat-card>
      <mat-card *ngIf="exists" class="form-error-card">
        <mat-content
          ><p class="title">
            We already have a user registered with that email address
          </p>
          <p>
            <a routerLink="/forgot-password">Reset Password</a>
          </p>
        </mat-content>
      </mat-card>
    </form>
  </mat-card>
</div>
